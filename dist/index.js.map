{"version":3,"sources":["app.js","index.js"],"names":["express","require","Client","qrcode","app","client","use","json","post","req","res","phoneNumber","message","body","sendMessage","then","status","success","catch","error","get","toDataURL","qrCode","err","url","send","on","qr","console","log","initialize","module","exports","port","listen"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAM;EAAEC;AAAO,CAAC,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AAC7C,MAAME,MAAM,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAEhC,MAAMG,GAAG,GAAGJ,OAAO,CAAC,CAAC;AACrB,MAAMK,MAAM,GAAG,IAAIH,MAAM,CAAC,CAAC;AAE3BE,GAAG,CAACE,GAAG,CAACN,OAAO,CAACO,IAAI,CAAC,CAAC,CAAC;;AAEvB;AACAH,GAAG,CAACI,IAAI,CAAC,eAAe,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAM;IAAEC,WAAW;IAAEC;EAAQ,CAAC,GAAGH,GAAG,CAACI,IAAI;;EAEzC;EACAR,MAAM,CAACS,WAAW,CAACH,WAAW,GAAC,OAAO,EAAEC,OAAO,CAAC,CAC7CG,IAAI,CAAC,MAAM;IACVL,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MAAEU,OAAO,EAAE,IAAI;MAAEL,OAAO,EAAE;IAAyB,CAAC,CAAC;EAC5E,CAAC,CAAC,CACDM,KAAK,CAAEC,KAAK,IAAK;IAChBT,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;MAAEU,OAAO,EAAE,KAAK;MAAEL,OAAO,EAAE,sBAAsB;MAAEO,KAAK,EAAEA,KAAK,CAACP;IAAQ,CAAC,CAAC;EACjG,CAAC,CAAC;AACN,CAAC,CAAC;;AAEF;AACAR,GAAG,CAACgB,GAAG,CAAC,UAAU,EAAE,CAACX,GAAG,EAAEC,GAAG,KAAK;EAChC;EACAP,MAAM,CAACkB,SAAS,CAAChB,MAAM,CAACiB,MAAM,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;IAC5C,IAAID,GAAG,EAAE;MACPb,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACT,IAAI,CAAC;QAAEU,OAAO,EAAE,KAAK;QAAEL,OAAO,EAAE;MAA6B,CAAC,CAAC;IACjF,CAAC,MAAM;MACL;MACAF,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACS,IAAI,CAAE,aAAYD,GAAI,oBAAmB,CAAC;IAC5D;EACF,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEF;AACAnB,MAAM,CAACqB,EAAE,CAAC,IAAI,EAAGC,EAAE,IAAK;EACtB;EACAtB,MAAM,CAACiB,MAAM,GAAGK,EAAE;AACpB,CAAC,CAAC;AAEFtB,MAAM,CAACqB,EAAE,CAAC,OAAO,EAAE,MAAM;EACvBE,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC;AAC7C,CAAC,CAAC;AAEFxB,MAAM,CAACyB,UAAU,CAAC,CAAC;AAEnBC,MAAM,CAACC,OAAO,GAAG5B,GAAG;;AChDpB,MAAMA,GAAG,GAAGH,OAAO,CAAC,OAAO,CAAC;AAE5B,MAAMgC,IAAI,GAAG,MAAM;AAEnB7B,GAAG,CAAC8B,MAAM,CAACD,IAAI,EAAE,MAAM;EACrBL,OAAO,CAACC,GAAG,CAAE,+BAA8BI,IAAK,KAAI,CAAC;AACvD,CAAC,CAAC","file":"index.js","sourceRoot":"../src","sourcesContent":["const express = require('express');\r\nconst { Client } = require('whatsapp-web.js');\r\nconst qrcode = require('qrcode');\r\n\r\nconst app = express();\r\nconst client = new Client();\r\n\r\napp.use(express.json());\r\n\r\n// Endpoint untuk mengirim pesan WhatsApp\r\napp.post('/send-message', (req, res) => {\r\n  const { phoneNumber, message } = req.body;\r\n\r\n  // Kirim pesan ke nomor HP yang ditentukan\r\n  client.sendMessage(phoneNumber+'@c.us', message)\r\n    .then(() => {\r\n      res.status(200).json({ success: true, message: 'Pesan berhasil dikirim' });\r\n    })\r\n    .catch((error) => {\r\n      res.status(500).json({ success: false, message: 'Gagal mengirim pesan', error: error.message });\r\n    });\r\n});\r\n\r\n// Endpoint untuk mendapatkan QR code\r\napp.get('/qr-code', (req, res) => {\r\n  // Generate QR code menggunakan session dari client WhatsApp\r\n  qrcode.toDataURL(client.qrCode, (err, url) => {\r\n    if (err) {\r\n      res.status(500).json({ success: false, message: 'Gagal menghasilkan QR code' });\r\n    } else {\r\n      // Kirim QR code sebagai respons\r\n      res.status(200).send(`<img src=\"${url}\" alt=\"QR Code\" />`);\r\n    }\r\n  });\r\n});\r\n\r\n// Inisialisasi WhatsApp client \r\nclient.on('qr', (qr) => {\r\n  // QR code tersedia, dapatkan URL-nya\r\n  client.qrCode = qr;\r\n});\r\n\r\nclient.on('ready', () => {\r\n  console.log('Bot WhatsApp sudah terhubung');\r\n});\r\n\r\nclient.initialize();\r\n\r\nmodule.exports = app;","const app = require('./app');\r\n\r\nconst port = '8888';\r\n\r\napp.listen(port, () => {\r\n  console.log(`Server is listening on port ${port}...`);\r\n});"]}